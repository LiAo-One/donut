;(function($){$.fn.tips=function(options){var defaults={side:1,msg:'你好！世界',color:'#FFF',bg:'#F00',maxWidth:"130",scroll:null,time:2,x:0,y:0,appendto:document.body,tipsCount:"only"};if(!$(this)[0].getAttribute("tipNo")){var thisIndex=Math.random();$(this)[0].setAttribute("tipNo",thisIndex);};var options=$.extend(defaults,options);if(!options.msg||isNaN(options.side)){throw new Error('参数错误，请检查');};if(!$('#tips_box_style').length){var style='<style id="tips_box_style" type="text/css">';style+='.jq_tips_box{padding:10px;position:absolute;overflow:hidden;display:inline;display:none;z-index:19920311;}';style+='.jq_tips_arrow{display:block;width:0px;height:0px;position:absolute;}';style+='.jq_tips_top{border-left:10px solid transparent;left:20px;bottom:0px;}';style+='.jq_tips_left{border-top:10px solid transparent;right:0px;top:18px;}';style+='.jq_tips_bottom{border-left:10px solid transparent;left:20px;top:0px;}';style+='.jq_tips_right{border-top:10px solid transparent;left:0px;top:18px;}';style+='.jq_tips_info{word-wrap: break-word;word-break:normal;border-radius:4px;padding:5px 8px;max-width:'+options.maxWidth+'px;overflow:hidden;box-shadow:1px 1px 1px #999;font-size:12px;cursor:pointer;}';style+='</style>';$(document.body).append(style);};function setTipsSide(tips,element_top,element_left,element_width,element_height){switch(options.side){case 1:tips.css({top:element_top-tips.outerHeight()+options.x,left:element_left-10+options.y});break;case 2:tips.css({top:element_top-20+options.x,left:element_left+element_width+options.y});break;case 3:tips.css({top:element_top+element_height+options.x,left:element_left-10+options.y});break;case 4:tips.css({top:element_top-20+options.x,left:element_left-tips.outerWidth()+options.y});break;default:};};var rand=function(num,from,to){return Math.round(Math.random()*(to-from))+num+from;};if(options.tipsCount=="only"){$(options.appendto).find(".jq_tips_box").remove();console.log("only");}else if(options.tipsCount=="each"){$(options.appendto).find("div[thistipNo='"+$(this).attr("tipNo")+"']").remove();};if(options.scroll!=null){var element=$(this);$(options.scroll).scroll(function(){var tips=$("div.jq_tips_box[thistipNo='"+element.attr("tipNo")+"']");if(tips.length){var element_top=element.offset().top,element_left=element.offset().left,element_height=element.outerHeight(),element_width=element.outerWidth();setTipsSide(tips,element_top,element_left,element_width,element_height);};});};for(var i=0;i<this.length;i++){var element=$(this[i]);var element_top=element.offset().top,element_left=element.offset().left,element_height=element.outerHeight(),element_width=element.outerWidth();options.side=(typeof(options.side)=="object"?rand(0,options.side[0],options.side[1]):options.side<0?1:options.side>4?4:Math.round(options.side));var sideName=options.side==1?'top':options.side==2?'right':options.side==3?'bottom':options.side==4?'left':'top';var tips=$('<div class="jq_tips_box" thistipNo='+element.attr("tipNo")+'><i class="jq_tips_arrow jq_tips_'+sideName+'"></i><div class="jq_tips_info">'+options.msg+'</div></div>').appendTo($(options.appendto));tips.find('.jq_tips_arrow').css('border-'+sideName,'10px solid '+options.bg);tips.find('.jq_tips_info').css({color:options.color,backgroundColor:options.bg});setTipsSide(tips,element_top,element_left,element_width,element_height);var closeTime;tips.show().click(function(){clearTimeout(closeTime);tips.fadeOut('fast',function(){tips.remove();});});if(options.time){closeTime=setTimeout(function(){tips.click();},options.time*1000);tips.hover(function(){clearTimeout(closeTime);},function(){closeTime=setTimeout(function(){tips.click();},options.time*1000);});};};return this;};})(jQuery);